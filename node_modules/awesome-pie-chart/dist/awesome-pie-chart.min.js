/* awesome-pie-chart 11-04-2016 */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):void 0!==typeof module&&module.exports?module.exports=b(require("jquery")):a.PieChart=b(a.jQuery)}(window||{},function(a){function b(b){this.args=b,this.args.graph=a.extend({strokeWidth:b.strokeWidth||1,space:0,outsideR:0,insideR:0,rotation:0,slices:[]},b.graph),a.each(this.args.graph.slices,function(a,b){b.angle=(b.percent||0)*f})}function c(b,c){return a(document.createElement("li")).attr({"class":b.className||"","data-name":b.name}).css({cursor:c?"pointer":"auto",overflow:"hidden",background:b.background||"transparent",position:"relative"}).on("click",function(){return c?c(b.name):void 0}).html(b.content)}function d(b){if(b){var d=a(document.createElement("ul")).attr({"class":b.className||""}).css({padding:0,margin:0,overflow:"hidden"});return a.each(b.items,function(a,e){c(e,b.callback).appendTo(d)}),d}}function e(c){b.call(this,c),this.graphEngine="svg";var e=this;this.getNode=function(){var b=j[e.graphEngine].getGraph(e.args.graph),c=d(e.args.description),f=[];switch(e.args.relativePos){case"left":b.css({"float":"left"}),c.css({"float":"right"}),f.push(b,c);break;case"right":b.css({"float":"right"}),c.css({"float":"left"}),f.push(c,b);break;case"top":f.push(b,c);break;case"bottom":f.push(c,b)}return e.el=a(document.createElement("div")).attr({"class":e.args.className}).css({background:e.args.background,display:"inline-block"}).append(f),e.el}}var f=360,g=function(a){var b=["E32322","EA621F","F18E1C","FDC60B","F4E500","8CBB26","008E5B","0696BB","2A71B0","444E99","6D398B","C4037D"];return"#"+b[a%b.length]},h=function(b,c,d,e){b.on(c,function(b){b=b||window.event;var c=b.target||event.srcElement;if(c.nodeName.toUpperCase()===d.toUpperCase()){var f=a(c).attr("data-name");if(f&&e)return e(f)}})},i=function(a){return{sin:Math.sin(a),cos:Math.cos(a),tan:Math.tan(a)}},j={svg:{createElement:function(b){return a(document.createElementNS("http://www.w3.org/2000/svg",b))},getSectionalPath:function(a,b,c,d){var e=a*Math.PI/180,f=b*Math.PI/180,g=i(e),h=i(f);return["M",c*g.cos,c*g.sin,"A",c,c,0,Math.abs(f-e)>Math.PI?1:0,1,c*h.cos,c*h.sin,"L",d*h.cos,d*h.sin,"A",d,d,0,Math.abs(f-e)>Math.PI?1:0,0,d*g.cos,d*g.sin,"Z"].join(" ")},generateTransform:function(a){return"translate("+a.outsideR+","+a.outsideR+") rotate("+a.rotation+") scale("+(a.flipY?"-1":"1")+","+(a.flipX?"-1":"1")+")"},generateSlices:function(a){for(var b=0,c=0,d=[],e=a.callback?"pointer":"auto",h=0;h<a.slices.length;h++){var i=a.slices[h],k=0===i.angle?0:a.space;c=i.angle===f?f:b+i.angle-k,d.push(j.svg.createElement("path").attr({d:j.svg.getSectionalPath(b,c,a.insideR,a.outsideR),"data-name":i.name,"data-angle":i.angle}).css({fill:i.color||g(h),stroke:a.strokeColor||i.color||g(h),strokeWidth:a.strokeWidth||0,cursor:e})),b+=i.angle}return d},constructTitle:function(b,c,d){return a(document.createElement("p")).css({margin:0,width:b+"px",height:c+"px",position:"absolute","margin-left":-(b/2)+"px","margin-top":-(c/2)+"px","line-height":c+"px",left:"50%",top:"50%","text-align":"center"}).html(d)},constructSvg:function(a){var b=this.createElement("svg").css({width:2*a.outsideR+"px",height:2*a.outsideR+"px"}),c=this.createElement("g").attr({transform:this.generateTransform(a)}).appendTo(b);return a.slices&&0===a.slices.length?this.createElement("path").attr({d:this.getSectionalPath(0,f,a.insideR,a.outsideR)}).css({fill:"#d9d9d9"}).appendTo(c):this.generateSlices(a).appendTo(c),this.bindEvent(b,"click","PATH",[a.clickCallback]),this.bindEvent(b,"mouseover","PATH",[a.mouseOverCallback]),this.bindEvent(b,"mouseout","PATH",[a.mouseOutCallback]),b},bindEvent:function(b,c,d,e){a.each(e,function(a,e){e&&h(b,c,d,e)})},getGraph:function(b){var c=a(document.createElement("div")).attr({"class":b.className||""}).css({position:"relative",width:2*b.outsideR});if(b.title){var d=2*Math.sqrt(Math.pow(b.insideR,2)/2),e=d;this.constructTitle(d,e,b.title).appendTo(c)}return this.constructSvg(b).appendTo(c),c}}};return e.prototype={constructor:e,freshTitle:function(b){a(this.el.find("p")).html(b)},freshGraph:function(b){var c=this,d=c.el.find("path"),e=c.args.graph,h={};a.each(b,function(a,b){h[b.name]={angle:b.percent*f,color:b.color}});var i=0;a.each(d,function(b,c){var d=a(c).attr("data-name");if(d){var g=void 0===h[d]?parseFloat(a(c).attr("angle")):h[d].angle,k=0===g?i:g===f?f:i+g-e.space;a(c).attr({d:j.svg.getSectionalPath(i,k,e.insideR,e.outsideR),"data-angle":g}),i+=g,delete h[d]}else a(c).remove()});var k=0;for(var l in h)if(h.hasOwnProperty(l)){var m=i+h[l].angle;j.svg.createElement("path").attr({d:j.svg.getSectionalPath(i,m,e.insideR,e.outsideR),"data-name":l,"data-angle":h[l].angle}).css({fill:h[l].color||g(k),stroke:e.strokeColor||h[l].color||g(k),stokeWidth:e.strokeColor?e.strokeWidth:0,cursor:e.clickCallback?"pointer":"auto"}).appendTo(c.el.find("g")),i+=h[l].angle,k++}},freshDesc:function(b){var d=this,e=d.args.description,f=d.el.find("li"),g={};a.each(b,function(a,b){g[b.name]={name:b.name,className:b.className,background:b.background,content:b.content}}),a.each(f,function(b,c){var d=a(c).attr("data-name");g[d]&&(g[d].content&&a(c).html(g[d].content),g[d].background&&a(c).css("background",g[d].background),g[d].className&&a(c).attr("class",g[d].className),delete g[d])});for(var h in g)g.hasOwnProperty(h)&&c(g[h],e.callback).appendTo(d.el.find("ul"))},fresh:function(a){if(a){a.title&&this.freshTitle(a.title),a.slices&&this.freshGraph(a.slices),a.items&&this.freshDesc(a.items)}}},e});